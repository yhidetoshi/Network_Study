#### Chapter6 VLANとVLAN間ルーティング
- **内容**
  - **VLANの概要**
  - **VLANの動作**
  - **スタティックVLANの設定と検証**
  - **トランクポートの設定と検証**
  - **VTP**
  - **VLAN間ルーティング**
  - **VLANおよびVLAN間ルーティングのトラブルシューティング**
  
**[VLANの特徴]**

|特徴    　 |説明         |
|:-----------|:------------|
|ブロードキャストドメインの分割|ブロードキャストドメインの分割によって、ブロードキャストドメインのサイズが小さくなり、ノード間の通信効率が高くなる|
|論理的なセグメント(グループ)を構成|VLAN単位で論理的ネットワークを分割し、ユーザを部門別にグループ化することができる|
|セキュリティの強化|トラフィックをLayer2レベルで分離できるため、異なるVLANに関わるネットワークセキュリティを強化できる|
|柔軟なネットワーク設計|物理的な接続とは関係なくユーザをネットワークに追加したり、接続変更せずに別のネットワークに分離できたりする|

- Point
  - VLANよってIPが節約されるわけではない
  - 普通の状態よりVLANの方が流れが複雑になる
  - ブロードキャストドメインの数は増加してサイズは縮小
  - コリジョンドメインへの影響はない

- ポートセキュリティ
  - 許可していないMACアドレスを持つコンピュータがスイッチポートに接続されているのを防ぐ 

**[VLANの作成]**
```
(config)#vlan <vlan-id>
(config-vlan)#name <vlan-name>
```

- **VLAN IDの範囲**

|VLAN-ID     |範囲         |説明
|:-----------|:------------|:------------|
|0,4095      |予約         |システム内部で使用|
|1           |標準         |シスコのイーサネットのデフォルトVLAN|
|2〜1001     |標準         |イーサネット用の標準VLAN|
|1002〜1005  |標準         |FDDIおよびトークンリング用のデフォルトVLAN|
|1006〜4094  |拡張         |イーサネット用の拡張VLAN|

  - デフォルトVLAN
    - 1/1002〜1005の5つ
      - デフォルトVLANは変更も削除もできない 
  - VLANの追加/変更/削除できるVLAN
    - 2〜1001/1006〜4094 
  

- スイッチポート
  - アクセスポート
    - 1つのVLANトラフィックのみを転送する
    - エンドユーザのコンピュータやサーバを接続する
  - トランクポート
    - 複数のVLANトラフィックを転送する 

- スイッチポートにVLANを割り当てる説明
  - コマンド：`(config-if)#switchport access vlan <vlan-id>`
  - VLANを作成した後にスイッチポートにVLANを割り当てるのが一般的
  - `switchport access vlanコマンド`で作成していないVLAN IDを指定した場合は
    - `「%Access VLAN does not exist. Creating vlan <vlan ID>」`と言うメッセージが表示されてVLANが作成される
    - 作成されたVLANはフラッシュメモリ内のvlan.datファイルに追加される

(ex)12ポートを持つCatalystスイッチに3つのVLANを設定
- スイッチはポートごとにコリジョンドメインを分割する
- VLANごとにブロードキャストドメインを分割する

=> コリジョンドメイン数は12, ブロードキャストドメイン数は3


- **スイッチポートに割り当てられているVLANを確認するコマンド**
  - `show vlan`
  - `show interfaces switchport`
  - `show running-config`
  - `show interface status`
