#### Chapter11 ACL
- **内容**
  - **ACL(Access Controll List)の概要**
  - **ワイルドカードマスク**
  - **番号付き標準ACL**
  - **番号付き拡張ACL**
  - **名前付きACL**
  - **ACLの検証**
  - **ACLのトラブルシューティング**



- ACL
  - 特定のパケットフローを識別し制御するための条件文をまとめたリスト
  - トラフィックを分類することができる
  - 代表的な用途
    - **ネットワークアドレス変換(NAT)**
    - **ルートフィルタリング**
      - ルーティングプロトコルによるルーティングアップデートの際に、特定の経路情報を選択してアドバタイズできる
    - **ルートの再配布**
      - 経路情報を分類しながら再配布することができる
    - **VPN** 
    

- インバウンドACL
  - **[ACL照合] --> [ルーティングテーブル参照]**
- アウトバウンドACL  
  - **[ルーティングテーブル参照] --> [ACL照合]**

![Alt Text](https://github.com/yhidetoshi/Pictures/raw/master/Network_Study/acl-fig1.png)

- ACL
  - 1台のルータで複数のACLを作成できる
    - 番号と名前で識別する方法の2つがある
  - 標準ACL
    - パケットの送信元IPアドレスのみをチェックする
    - 送信元IPアドレスを指定するためのワイルドカードマスクの設定を省略することができる
  - ルータを通過するパケットをフィルタリング対象にするが、ルータから発信するパケットはフィルタリングされない 
  - 1つのインターフェースに標準ACLと拡張ACLの両方を適用することはできない
  - ACLに含まれる1行の条件文を『ステートメント』という
  - 各ステートメントにはシーケンス番号が振られる
  - ACLの照合はシーケンス番号の小さい順に行われる
  - ACLの最終行には必ず、「暗黙の拒否(deny)」が存在する
  - Permmitステートメントが最低1行必要
  - 1つのインターフェースの各方向に対して、プロトコル(ipv4, ipv6など)ごとに1つのACLを適用できる

- 番号付きACL
  - **標準ACL**
    - `1〜99`, `1300〜1999`
  - **拡張ACL**
    - `100〜199`, `200〜2699` 


- **ワイルドカードマスク**
  - 直前に指定したIPアドレスに対して「どの部分をチェックする必要があるか」を指定する
  - ワイルドカードマスクは32ビットの値で、8ビットずつドット(.)で区切り10進数で表記する
    - 「0」チェックする、「1」チェックしない
    - (例) 192.168.1.5の全てをチェックする場合
      - `0.0.0.0`  
    - (例) 192.168.1.5の全てをチェックしない場合
      - `255.255.255.255`
  - ワイルドカードマスク`0.0.0.0`の代わりに`host`をipアドレスの前につけて代用できる
  - `1.1.1.1.`は`any`で代用できる

**番号付き標準ACLの作成**
```
(config)#access-list <acl-number> { permit | deny } <source> [<wildcard>]

(例)
(config)#access-list 1 permit 10.1.1.1 0.0.0.0

-> 標準ACLは0.0.0.0のワイルドカードを省略できる

(config)#access-list 1 permit host 10.1.1.1

- 番号付きACLをインターフェースに適用
(config-if)#ip access-group <acl-number> { in | out }
```
